<?php

function CodeToCity($code){
    switch ($code){
     case "THR": return "تهران"; break;
     case "MHD": return "مشهد"; break;
     case "KIH": return "کیش"; break;
     case "AWZ": return "اهواز"; break;
     case "SYZ": return "شیراز"; break;
     case "IFN": return "اصفهان"; break;
     case "GSM": return "قشم"; break;
     case "TBZ": return "تبریز"; break;
     case "ADU": return "اردبیل"; break;
     case "BND": return "بندرعباس"; break;
     case "OMH": return "ارومیه"; break;
     case "QKC": return "کرج"; break;
     case "NSH": return "نوشهر"; break;
     case "QOM": return "قم"; break;
     case "ABD": return "آبادان"; break;
     case "AEU": return "جزیره ابوموسی"; break;
     case "KER": return "کرمان"; break;
     case "HDM": return "همدان"; break;
     case "SRY": return "ساری"; break;
     case "AZD": return "یزد"; break;
     case "SDG": return "سنندج"; break;
     case "PGU": return "عسلویه"; break;
     case "KSH": return "کرمانشاه"; break;
     case "AFZ": return "سبزوار"; break;
     case "RAS": return "رشت"; break;
     case "RZR": return "رامسر"; break;
     case "DEF": return "دزفول"; break;
     case "BJB": return "بجنورد"; break;
     case "YES": return "یاسوج"; break;
     case "KHY": return "خوی"; break;
     case "PFQ": return "پارس آباد"; break;
     case "BXR": return "بم"; break;
     case "IIL": return "ایلام"; break;
     case "KHK": return "خارک"; break;
     case "BUZ": return "بوشهر"; break;
     case "JWN": return "زنجان"; break;
     case "TCX": return "طبس"; break;
     case "GBT": return "گرگان"; break;
     case "NJF": return "نجف"; break;
     case "BGW": return "بغداد"; break;
     case "IST": return "استانبول"; break;
     case "KWI": return "کویت"; break;
     case "KHD": return "خرم آباد"; break;
     case "ZAH": return "زاهدان"; break;
     case "JAR": return "جهرم"; break;
     case "MRX": return "ماهشهر"; break;
     case "DXB": return "دبی"; break;
     case "ISU": return "سلیمانیه"; break;
     case "ISE": return "اسپارتا"; break;
     case "ZBR": return "چابهار"; break;
     case "AYT": return "آنتالیا"; break;
     case "TBS": return "تفلیس"; break;
     case "ADB": return "ازمیر"; break;
     case "KUL": return "کوالالامپور"; break;
     case "CAN": return "گوانجو"; break;
     case "EVN": return "ایروان"; break;
     case "SAW": return "سابیها"; break;
     case "BOM": return "بمبئی"; break;
     case "ACZ": return "زابل"; break;
     case "BSR": return "بصره"; break;
     case "BEY": return "بیروت"; break;
     case "XBJ": return "بیرجند"; break;
     case "BKK": return "بانکوک"; break;
     case "CQD": return "شهرکرد"; break;
     case "PEK": return "پکن"; break;
     case "EBL": return "اربیل"; break;
     case "RJN": return "رفسنجان"; break;
     case "GCH": return "گچساران"; break;
     case "IHR": return "ایرانشهر"; break;
     case "BDH": return "بندر لنگه"; break;
     case "JYR": return "جیرفت"; break;
     case "SYJ": return "سیرجان"; break;
     case "AJK": return "اراک"; break;
     case "DYU": return "دوشنبه"; break;
     case "KBL": return "کابل"; break;
     case "LRR": return "لار"; break;
     case "ACP": return "مراغه"; break;
     case "RUD": return "شاهرود"; break;
     case "BAK": return "باکو"; break;
     case "ASF": return "آستراخان"; break;
     case "BUS": return "باتومی"; break;
     case "MOW": return "مسکو"; break;
     case "IEV": return "کی یف"; break;
     case "ANK": return "آنکارا"; break;
     case "KSN": return "کاشان"; break;
     case "ADA": return "آدنا"; break;
     case "LFM": return "لامرد"; break;
     case "MCT": return "مسقط"; break;
     case "TSE": return "آستانه"; break;
     case "AMS": return "آمستردام"; break;
     case "BAH": return "بحرین"; break;
     case "CGN": return "کلن"; break;
     case "CPH": return "کپنهاگ"; break;
     case "DAM": return "دمشق"; break;
     case "DOH": return "دوحه"; break;
     case "ROM": return "رم"; break;
     case "FRA": return "فرانکفورت"; break;
     case "GOT": return "گوتنبرگ"; break;
     case "HAM": return "هامبورگ"; break;
     case "KHI": return "کراچی"; break;
     case "MIL": return "میلان"; break;
     case "PAR": return "پاریس"; break;
     case "STO": return "استکهلم"; break;
     case "TAS": return "تاشکند"; break;
     case "VIE": return "وین"; break;
     case "VIL": return "داخله"; break;
     case "LED": return "سنت پترزبورگ"; break;
     case "VAR": return "وارنا"; break;
     case "LON": return "لندن"; break;
     case "DNZ": return "دنیزلی"; break;
     case "AKW": return "امیدیه"; break;
     case "PVG": return "شانگهای"; break;
     case "MUC": return "مونیخ"; break;
     case "MLE": return "ماله"; break;
     case "HKT": return "پوکت"; break;
     case "GOI": return "گوا"; break;
     case "DUS": return "دوسلدورف"; break;
     case "DEL": return "دهلی"; break;
     case "COK": return "کوچی"; break;
     case "CMB": return "کلمبو"; break;
     case "ALA": return "آلماتی"; break;
     case "IAQ": return "بهرگان"; break;
     case "MKU": return "ماکو"; break;
        default: $code;
    }
}
function  toPersianNum($number)
{
        $number = str_replace("1","۱",$number);
        $number = str_replace("2","۲",$number);
        $number = str_replace("3","۳",$number);
        $number = str_replace("4","۴",$number);
        $number = str_replace("5","۵",$number);
        $number = str_replace("6","۶",$number);
        $number = str_replace("7","۷",$number);
        $number = str_replace("8","۸",$number);
        $number = str_replace("9","۹",$number);
        $number = str_replace("0","۰",$number);
        return $number;
}

function  toEnglishNum($number)
{
    $number = str_replace("۱","1",$number);
    $number = str_replace("۲","2",$number);
    $number = str_replace("۳","3",$number);
    $number = str_replace("۴","4",$number);
    $number = str_replace("۵","5",$number);
    $number = str_replace("۶","6",$number);
    $number = str_replace("۷","7",$number);
    $number = str_replace("۸","8",$number);
    $number = str_replace("۹","9",$number);
    $number = str_replace("۰","0",$number);
    return $number;
}

function div($a,$b) {
    return (int) ($a / $b);
}

function gregorian_to_jalali ($g_y, $g_m, $g_d,$str)
{
    $g_days_in_month = array(31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31);
    $j_days_in_month = array(31, 31, 31, 31, 31, 31, 30, 30, 30, 30, 30, 29);


    $gy = $g_y-1600;
    $gm = $g_m-1;
    $gd = $g_d-1;

    $g_day_no = 365*$gy+div($gy+3,4)-div($gy+99,100)+div($gy+399,400);

    for ($i=0; $i < $gm; ++$i)
        $g_day_no += $g_days_in_month[$i];
    if ($gm>1 && (($gy%4==0 && $gy%100!=0) || ($gy%400==0)))
        /* leap and after Feb */
        $g_day_no++;
    $g_day_no += $gd;

    $j_day_no = $g_day_no-79;

    $j_np = div($j_day_no, 12053); /* 12053 = 365*33 + 32/4 */
    $j_day_no = $j_day_no % 12053;

    $jy = 979+33*$j_np+4*div($j_day_no,1461); /* 1461 = 365*4 + 4/4 */

    $j_day_no %= 1461;

    if ($j_day_no >= 366) {
        $jy += div($j_day_no-1, 365);
        $j_day_no = ($j_day_no-1)%365;
    }

    for ($i = 0; $i < 11 && $j_day_no >= $j_days_in_month[$i]; ++$i)
        $j_day_no -= $j_days_in_month[$i];
    $jm = $i+1;
    $jd = $j_day_no+1;
    if($str) return $jy.'/'.$jm.'/'.$jd ;
    return array($jy, $jm, $jd);
}

function jalali_to_gregorian($j_y, $j_m, $j_d,$str)
{
    $g_days_in_month = array(31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31);
    $j_days_in_month = array(31, 31, 31, 31, 31, 31, 30, 30, 30, 30, 30, 29);


    $jy = (int)($j_y)-979;
    $jm = (int)($j_m)-1;
    $jd = (int)($j_d)-1;

    $j_day_no = 365*$jy + div($jy, 33)*8 + div($jy%33+3, 4);

    for ($i=0; $i < $jm; ++$i)
        $j_day_no += $j_days_in_month[$i];

    $j_day_no += $jd;

    $g_day_no = $j_day_no+79;

    $gy = 1600 + 400*div($g_day_no, 146097); /* 146097 = 365*400 + 400/4 - 400/100 + 400/400 */
    $g_day_no = $g_day_no % 146097;

    $leap = true;
    if ($g_day_no >= 36525) /* 36525 = 365*100 + 100/4 */
    {
        $g_day_no--;
        $gy += 100*div($g_day_no,  36524); /* 36524 = 365*100 + 100/4 - 100/100 */
        $g_day_no = $g_day_no % 36524;

        if ($g_day_no >= 365)
            $g_day_no++;
        else
            $leap = false;
    }

    $gy += 4*div($g_day_no, 1461); /* 1461 = 365*4 + 4/4 */
    $g_day_no %= 1461;

    if ($g_day_no >= 366) {
        $leap = false;

        $g_day_no--;
        $gy += div($g_day_no, 365);
        $g_day_no = $g_day_no % 365;
    }

    for ($i = 0; $g_day_no >= $g_days_in_month[$i] + ($i == 1 && $leap); $i++)
        $g_day_no -= $g_days_in_month[$i] + ($i == 1 && $leap);
    $gm = $i+1;
    $gd = $g_day_no+1;
    if($str) return $gy.'/'.$gm.'/'.$gd ;
    return array($gy, $gm, $gd);
}


function comparedate($_date_mix_jalaly,$_date_mix_gregorian)
{
    $_date_arr_jalaly = explode('/', $_date_mix_jalaly);
    $_date_arr_gregorian = explode('/', $_date_mix_gregorian);

    $arr_jtg = jalali_to_gregorian($_date_arr_jalaly[0],$_date_arr_jalaly[1],$_date_arr_jalaly[2]);

    if($_date_arr_gregorian[0]> $arr_jtg[0])
    {
        return  false;
    }

    else if($_date_arr_gregorian[0]== $arr_jtg[0] && $_date_arr_gregorian[1]>$arr_jtg[1])
    {
        return false;
    }
    else if($_date_arr_gregorian[0]== $arr_jtg[0] && $_date_arr_gregorian[1]==$arr_jtg[1] && $_date_arr_gregorian[2]>$arr_jtg[2])
    {
        return false;
    }
    return true ;
}

function daysOfMonth($m){
    if (1<= $m && $m <= 6)
        return 31;
    elseif (7 <= $m && $m <= 7)
        return 30;
    elseif ( $m==12 )
        return 29;
}

function getBirthday($passenger){
//    $date=explode(' ',\Carbon\Carbon::now());
//    $array=explode('-',$date[0]);
//    $y=$array[0];$m=$array[1];$d=$array[2];

    $y='1397';$m='12';$d='5';

    if ($passenger=='INF'){
        $infY=$y-2;
        $infM=$m;
        if ($d>10){
            $infD=$d-10;
            if ($infD<10)
                $infD='0'.$infD;
        }
        else{
            $infM=$m-1;
            $infD=(daysOfMonth($m)+$d)-10;
        }
        $start=$infY.'/'.$infM.'/'.$infD;

        $end=$y.'/'.$infM.'/'.$infD;
    }


    else if ($passenger=='CHD'){
        $chdSY=$y-12;
        $start=$chdSY.'/'.$m.'/'.$d;
        $chdEY=$y-2;
        $end=$chdEY.'/'.$m.'/'.$d;
    }
    else {
        $adtSY='1300';
        $start=$adtSY.'/'.$m.'/'.$d;
        $adtEY=$y-12;
        $end=$adtEY.'/'.$m.'/'.($d-1);
    }

    return 'startDate:'. $start.',endDate: '.$end;

}

?>